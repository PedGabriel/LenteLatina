import {
  DevEnvironment,
  require_main
} from "./chunk-VBIQ3GAW.js";
import {
  __toESM
} from "./chunk-PR4QN5HX.js";

// node_modules/vite/dist/node/index.js
var import_esbuild = __toESM(require_main());
function createFetchableDevEnvironment(name, config, context) {
  if (typeof Request === "undefined" || typeof Response === "undefined") throw new TypeError("FetchableDevEnvironment requires a global `Request` and `Response` object.");
  if (!context.handleRequest) throw new TypeError("FetchableDevEnvironment requires a `handleRequest` method during initialisation.");
  return new FetchableDevEnvironment(name, config, context);
}
function isFetchableDevEnvironment(environment) {
  return environment instanceof FetchableDevEnvironment;
}
var FetchableDevEnvironment = class extends DevEnvironment {
  _handleRequest;
  constructor(name, config, context) {
    super(name, config, context);
    this._handleRequest = context.handleRequest;
  }
  async dispatchFetch(request) {
    if (!(request instanceof Request)) throw new TypeError("FetchableDevEnvironment `dispatchFetch` must receive a `Request` object.");
    const response = await this._handleRequest(request);
    if (!(response instanceof Response)) throw new TypeError("FetchableDevEnvironment `context.handleRequest` must return a `Response` object.");
    return response;
  }
};

export {
  import_esbuild,
  createFetchableDevEnvironment,
  isFetchableDevEnvironment
};
//# sourceMappingURL=chunk-3IZBHGJI.js.map
